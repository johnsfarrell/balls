<!DOCTYPE html>
<html>

<head>
    <title>Balls</title>
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <canvas id="balls"></canvas>
    <script>
        var canvas = document.getElementById('balls');
        var ctx = canvas.getContext('2d');

        // set canvas to size of window
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // balls on canvas
        var balls = [];

        function Ball(x, y, vx, vy, radius, color) {
            this.x = x;
            this.y = y;
            this.vx = vx;
            this.vy = vy;
            this.radius = radius;
            this.gravity = 0.2 * radius;
            this.color = color;
        }

        Ball.prototype.wallCollision = function () {
            // right wall
            if (this.x + this.radius > canvas.width) {
                this.vx = -this.vx;
                this.x = canvas.width - this.radius;
            }
            // left wall
            if (this.x - this.radius < 0) {
                this.vx = -this.vx;
                this.x = this.radius;
            }
            // bottom wall
            if (this.y + this.radius > canvas.height) {
                this.vy = -this.vy;
                this.y = canvas.height - this.radius;
            }
            // top wall
            if (this.y - this.radius < 0) {
                this.vy = -this.vy;
                this.y = this.radius;
            }
        };

        Ball.prototype.update = function () {
            // ball update position and velocity
            this.x += this.vx;
            this.vy += 0.2;
            this.y += this.vy;
            this.wallCollision();
        };

        Ball.prototype.draw = function () {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
            ctx.fillStyle = this.color;
            ctx.fill();
            ctx.closePath();
        };

        function randomColor() {
            // src: https://stackoverflow.com/questions/5092808/how-do-i-randomly-generate-html-hex-color-codes-using-javascript 
            return '#' + (Math.random() * 0xFFFFFF << 0).toString(16).padStart(6, '0');
        }

        function createBall(x, y) {
            // creates new ball and adds to list of balls
            var radius = 10 + (Math.random() + 0.5) * 20;
            var vx = (Math.random() - 0.5) * 12;
            var vy = (Math.random() + 0.5) * -6;
            var color = randomColor();
            balls.push(new Ball(x, y, vx, vy, radius, color));
        }


        canvas.addEventListener('click', function (event) {
            var rect = canvas.getBoundingClientRect();
            var clickX = event.clientX - rect.left;
            var clickY = event.clientY - rect.top;

            // check if existing ball clicked
            for (var i = balls.length - 1; i >= 0; i--) {
                var ball = balls[i];
                var dx = ball.x - clickX, dy = ball.y - clickY;
                var distance = Math.sqrt(dx ** 2 + dy ** 2);
                if (distance < ball.radius) {
                    balls.splice(i, 1);
                    return;
                }
            }

            // if no existing ball clicked, create new ball
            createBall(clickX, clickY);
        });

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            balls.forEach(function (ball) {
                ball.update();
                ball.draw();
            });
            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>

</html>